// THIS FILE IS AUTOGENERATED. DO NOT EDIT MANUALLY.

import {AppNode, AppNodeType} from './workflow.gen';
import {NodeDescriptor, DataNode, Position} from './types';
{{#descriptors}}
import { {{descriptorName}} } from './{{folder}}/descriptor';
{{/descriptors}}

const generateNode = <T extends AppNodeType, U extends DataNode>(nodeDescriptor: NodeDescriptor<T, U>, id: string, position: Position) => {
    return {
        id,
        type: nodeDescriptor.type,
        position,
        data: nodeDescriptor.defaultData
    };
}

export const nodeFactory = (nodeType: AppNodeType, id: string, position: Position): AppNode => {
    let newNode: AppNode | undefined;

    switch (nodeType) {
{{#descriptors}}
        case {{descriptorName}}.type:
            newNode = generateNode({{descriptorName}}, id, position);
            break;
{{/descriptors}}
        default:
            throw new Error(`Unsupported node type: ${nodeType}`);
    }

    return newNode;
};